import{a as V,c as N,_ as $}from"./entry.cd53fa62.js";import{j as q,a,L as d,X as u,Y as e,_ as C,Z as c,a8 as b,a9 as P,u as t,x,a5 as m,aa as B,H as O,$ as K,a0 as U}from"./swiper-vue.9087d98d.js";import{u as D}from"./cookie.c56812de.js";import{I as Y}from"./info-box.5e528c3f.js";const y=h=>(K("data-v-63b02884"),h=h(),U(),h),j={class:"section"},A=y(()=>e("div",{class:"bg is-hidden-mobile"},null,-1)),F={class:"container"},G=y(()=>e("h1",{class:"page-title"},"Reset Password",-1)),H={class:"grids is-2-desktop is-1-mobile margin-top-30 gap-30"},L={class:"left"},M={action:"",class:"grids is-1-desktop is-1-mobile gap-20"},X={class:"field"},Z={for:""},z=y(()=>e("span",null,"*",-1)),J={class:"control has-addon"},Q={key:0,style:{color:"#0eb56d"}},W={key:1,style:{color:"red"}},ee={class:"field"},se=y(()=>e("label",{for:""},[C("Enter OTP code from Inbox"),e("span",null,"*")],-1)),te={class:"control"},oe=["onKeyup"],ae={key:0,style:{color:"red"}},le={class:"field"},ne=y(()=>e("label",{for:""},[C("Set new password "),e("span",null,"*")],-1)),ie={class:"control"},re=["disabled"],de={key:0,style:{color:"red"}},ue={key:1,style:{color:"#0eb56d"}},ce={class:"right"},pe=q({__name:"password-recovery",setup(h){const g=V().$axios,R=N(),p=a(),v=a(),i=a(""),w=a(""),_=a(),T=a(!1),f=a(""),k=a(""),l=a(""),r=D("verifyToken"),S=async()=>{if(!p.value)return i.value="Please fill email first";i.value="",await g.get(`request-toverify?email=${p.value}`).then(s=>{s.status===200&&(r.value=s.data.token,w.value="OTP has sent, Please check your email",setTimeout(()=>{w.value=""},4500))}).catch(s=>{i.value=s.response.data.message,s.response.status===429&&(i.value="Sorry, You have too many request, please try again after 10 minutes")})},E=async()=>{if(!r.value)return l.value="Not found your verifyTOken yet";if(!v.value)return l.value="Please fill your verifyCode";await g.post("verify-from-request",{verifyCode:v.value,verifyToken:r.value}).then(s=>{s.status===201&&(r.value=s.data.token,T.value=!0,l.value="")}).catch(s=>{l.value="",s.response.status===501?l.value="Can not verify":l.value=s.response.data.message})},I=async()=>{if(!r.value||!_.value)return f.value="Please fill password";f.value="",await g.post("reset-password",{newPassword:_.value,token:r.value}).then(s=>{s.status===201&&(k.value=s.data.message,setTimeout(()=>{R.push("/auth/login")},3e3))}).catch(s=>{s.response.status===501&&(f.value="Can not reset password, Please try again")})};return(s,o)=>(d(),u("section",j,[A,e("div",F,[G,e("div",H,[e("div",L,[e("form",M,[e("div",X,[e("label",Z,[C(c(s.$t("email"))+" ",1),z]),e("div",J,[b(e("input",{type:"text",class:"input",placeholder:"E-mail","onUpdate:modelValue":o[0]||(o[0]=n=>x(p)?p.value=n:null)},null,512),[[P,t(p)]]),e("a",{onClick:o[1]||(o[1]=n=>S())},"Get Code")]),t(w)?(d(),u("p",Q,c(t(w)),1)):m("",!0),t(i)?(d(),u("p",W,c(t(i)),1)):m("",!0)]),e("div",ee,[se,e("div",te,[b(e("input",{type:"text",class:"input",placeholder:"Fill OTP and Press Enter","onUpdate:modelValue":o[2]||(o[2]=n=>x(v)?v.value=n:null),onKeyup:B(E,["enter"])},null,40,oe),[[P,t(v)]])]),t(l)?(d(),u("p",ae,c(t(l)),1)):m("",!0)]),e("div",le,[ne,e("div",ie,[b(e("input",{type:"text",class:"input",placeholder:"Password",disabled:!t(T),"onUpdate:modelValue":o[3]||(o[3]=n=>x(_)?_.value=n:null)},null,8,re),[[P,t(_)]])])]),t(f)?(d(),u("p",de,c(t(f)),1)):m("",!0),t(k)?(d(),u("p",ue,c(t(k)),1)):m("",!0)]),e("button",{class:"button main margin-top-20 margin-bottom-10",onClick:o[4]||(o[4]=n=>I())}," Reset Password ")]),e("div",ce,[O(Y)])])])]))}});const ye=$(pe,[["__scopeId","data-v-63b02884"]]);export{ye as default};
