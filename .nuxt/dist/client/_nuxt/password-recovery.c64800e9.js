import{a as E,c as N,d as O,_ as $}from"./entry.f2dc0412.js";import{j as q,a,M as d,N as u,O as e,X as C,R as c,P as b,Q as P,u as t,x,U as y,ab as B,I as U,V as K,W as D}from"./swiper-vue.6a103a73.js";import{I as M}from"./info-box.0d2c1a5a.js";const m=h=>(K("data-v-63b02884"),h=h(),D(),h),j={class:"section"},A=m(()=>e("div",{class:"bg is-hidden-mobile"},null,-1)),F={class:"container"},G=m(()=>e("h1",{class:"page-title"},"Reset Password",-1)),Q={class:"grids is-2-desktop is-1-mobile margin-top-30 gap-30"},W={class:"left"},X={action:"",class:"grids is-1-desktop is-1-mobile gap-20"},Y={class:"field"},z={for:""},H=m(()=>e("span",null,"*",-1)),J={class:"control has-addon"},L={key:0,style:{color:"#0eb56d"}},Z={key:1,style:{color:"red"}},ee={class:"field"},se=m(()=>e("label",{for:""},[C("Enter OTP code from Inbox"),e("span",null,"*")],-1)),te={class:"control"},oe=["onKeyup"],ae={key:0,style:{color:"red"}},le={class:"field"},ne=m(()=>e("label",{for:""},[C("Set new password "),e("span",null,"*")],-1)),ie={class:"control"},re=["disabled"],de={key:0,style:{color:"red"}},ue={key:1,style:{color:"#0eb56d"}},ce={class:"right"},pe=q({__name:"password-recovery",setup(h){const g=E().$axios,R=N(),p=a(),v=a(),i=a(""),w=a(""),_=a(),T=a(!1),f=a(""),k=a(""),l=a(""),r=O("verifyToken"),I=async()=>{if(!p.value)return i.value="Please fill email first";i.value="",await g.get(`request-toverify?email=${p.value}`).then(s=>{s.status===200&&(r.value=s.data.token,w.value="OTP has sent, Please check your email",setTimeout(()=>{w.value=""},4500))}).catch(s=>{i.value=s.response.data.message,s.response.status===429&&(i.value="Sorry, You have too many request, please try again after 10 minutes")})},S=async()=>{if(!r.value)return l.value="Not found your verifyTOken yet";if(!v.value)return l.value="Please fill your verifyCode";await g.post("verify-from-request",{verifyCode:v.value,verifyToken:r.value}).then(s=>{s.status===201&&(r.value=s.data.token,T.value=!0,l.value="")}).catch(s=>{l.value="",s.response.status===501?l.value="Can not verify":l.value=s.response.data.message})},V=async()=>{if(!r.value||!_.value)return f.value="Please fill password";f.value="",await g.post("reset-password",{newPassword:_.value,token:r.value}).then(s=>{s.status===201&&(k.value=s.data.message,setTimeout(()=>{R.push("/auth/login")},3e3))}).catch(s=>{s.response.status===501&&(f.value="Can not reset password, Please try again")})};return(s,o)=>(d(),u("section",j,[A,e("div",F,[G,e("div",Q,[e("div",W,[e("form",X,[e("div",Y,[e("label",z,[C(c(s.$t("email"))+" ",1),H]),e("div",J,[b(e("input",{type:"text",class:"input",placeholder:"E-mail","onUpdate:modelValue":o[0]||(o[0]=n=>x(p)?p.value=n:null)},null,512),[[P,t(p)]]),e("a",{onClick:o[1]||(o[1]=n=>I())},"Get Code")]),t(w)?(d(),u("p",L,c(t(w)),1)):y("",!0),t(i)?(d(),u("p",Z,c(t(i)),1)):y("",!0)]),e("div",ee,[se,e("div",te,[b(e("input",{type:"text",class:"input",placeholder:"Fill OTP and Press Enter","onUpdate:modelValue":o[2]||(o[2]=n=>x(v)?v.value=n:null),onKeyup:B(S,["enter"])},null,40,oe),[[P,t(v)]])]),t(l)?(d(),u("p",ae,c(t(l)),1)):y("",!0)]),e("div",le,[ne,e("div",ie,[b(e("input",{type:"text",class:"input",placeholder:"Password",disabled:!t(T),"onUpdate:modelValue":o[3]||(o[3]=n=>x(_)?_.value=n:null)},null,8,re),[[P,t(_)]])])]),t(f)?(d(),u("p",de,c(t(f)),1)):y("",!0),t(k)?(d(),u("p",ue,c(t(k)),1)):y("",!0)]),e("button",{class:"button main margin-top-20 margin-bottom-10",onClick:o[4]||(o[4]=n=>V())}," Reset Password ")]),e("div",ce,[U(M)])])])]))}});const ye=$(pe,[["__scopeId","data-v-63b02884"]]);export{ye as default};
