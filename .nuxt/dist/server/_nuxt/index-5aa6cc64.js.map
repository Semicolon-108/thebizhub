{"version":3,"file":"index-5aa6cc64.js","sources":["../../../../pages/category/index.vue"],"sourcesContent":["<template>\r\n  <section>\r\n    <div class=\"container\">\r\n      <h1 class=\"page-title\">{{ routerName }}</h1>\r\n      <p v-if=\"detail\">{{ detail }}</p>\r\n      <CategoryCardList :info=\"info\" />\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport CategoryCardList from \"../../components/category/card-list.vue\";\r\n\r\nconst axios = useNuxtApp().$axios;\r\nconst route = useRoute();\r\nconst cateInfo = ref<any>();\r\nconst isCate = ref<any>();\r\nconst info = ref<any>();\r\nconst page = ref(1);\r\nconst perPage = ref(10000);\r\nconst tagId = ref(\"\");\r\nconst categoryFilter = ref<any>(\"\");\r\nconst totals = ref<any>(0);\r\nconst msgError = ref<any>();\r\nconst search = ref<any>(\"\");\r\nconst routerName = ref<any>(\"\")\r\nconst detail = ref<any>(\"\")\r\nimport { useI18n } from \"vue-i18n\";\r\nconst { locale }: any = useI18n();\r\nconst isLang = ref<any>();\r\n\r\nconst fetchCategory = async () => {\r\n  const data = await axios.post(`get-reuses-list/Category`);\r\n  const isFilter = data.data.info.filter((f: any) => !f.groupStatus);\r\n  cateInfo.value = isFilter;\r\n  isCate.value = data.data.info;\r\n};\r\nconst fetch = async () => {\r\n  info.value = [];\r\n  await axios\r\n    .post(\r\n      `get-articles?page=${page.value}&perPage=${perPage.value}&tagId=${tagId.value}&categoryId=${categoryFilter.value}&search=${search.value}`\r\n    )\r\n    .then((res) => {\r\n      if (res.status === 200) {\r\n        info.value = res.data.info;\r\n        totals.value = res.data.total;\r\n      }\r\n    })\r\n    .catch((e: any) => {\r\n      if (e) {\r\n        msgError.value = \"Data empty\";\r\n      }\r\n    });\r\n};\r\n\r\nconst isFilter = () => {\r\n  const cateName = route.query.is;\r\n  // routerName.value = route.query.is\r\n  const events = \"Events \"\r\n  const update = \"Update\";\r\n  if (cateName === update) {\r\n    search.value = update;\r\n    categoryFilter.value = \"\";\r\n  } else if (cateName === events) {\r\n    // 6514fbff51ce087ae07926dc\r\n    // routerName.value = \"Events & Activities\"\r\n    categoryFilter.value = \"6514fbff51ce087ae07926dc\"\r\n    search.value = \"\";\r\n  } else {\r\n    search.value = \"\";\r\n    const dataEn = isCate.value.find((i: any) => i.name === cateName);\r\n    const dataLao = isCate.value.find((i: any) => i.laoName === cateName);\r\n    if (dataEn) {\r\n      categoryFilter.value = dataEn._id;\r\n      search.value = \"\";\r\n    } else if (dataLao) {\r\n      categoryFilter.value = dataLao._id;\r\n      search.value = \"\";\r\n    } else {\r\n      categoryFilter.value = \"\";\r\n      search.value = \"\";\r\n    }\r\n  }\r\n};\r\nconst getById = async () => {\r\n  const res = await axios.post(`edit-reuse?_id=${categoryFilter.value}&type=Category&lang=${isLang.value}`);\r\n  routerName.value = res.data.info.name;\r\n  detail.value = res.data.info.detail\r\n}\r\n//onMounted(async () => {\r\nawait fetchCategory();\r\nisFilter();\r\nawait fetch();\r\n// });\r\n\r\nwatch(() => [route.path, locale.value], ([value1, value2]) => {\r\n  isLang.value = value2\r\n  isFilter();\r\n  fetch();\r\n  getById()\r\n},\r\n  { immediate: true, deep: true }\r\n)\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.tabs-container {\r\n  display: flex;\r\n  align-items: center;\r\n  position: relative;\r\n\r\n  .tabs {\r\n    flex-grow: 1;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    overflow-x: auto;\r\n    overflow-y: hidden;\r\n    position: relative;\r\n\r\n    @include mobile {\r\n      justify-content: flex-start;\r\n    }\r\n\r\n    li {\r\n      padding: 5px 10px;\r\n      cursor: pointer;\r\n      display: flex;\r\n      align-items: flex-end;\r\n      white-space: pre !important;\r\n\r\n      &.current {\r\n        color: var(--sub-color);\r\n      }\r\n\r\n      i {\r\n        line-height: 1;\r\n        margin-left: 5px;\r\n      }\r\n    }\r\n  }\r\n\r\n  p {\r\n    display: none;\r\n    position: absolute;\r\n    right: 0;\r\n    width: 50px;\r\n    align-items: center;\r\n    justify-content: flex-end;\r\n    background: linear-gradient(270deg,\r\n        rgba(255, 255, 255, 1) 0%,\r\n        rgba(255, 255, 255, 0) 100%);\r\n\r\n    @include mobile {\r\n      display: flex;\r\n    }\r\n\r\n    @include tablet {\r\n      display: flex;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"names":["isFilter","_withAsyncContext"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAaM,UAAA,QAAQ,WAAa,EAAA;AAC3B,UAAM,QAAQ;AACd,UAAM,WAAW;AACjB,UAAM,SAAS;AACf,UAAM,OAAO;AACP,UAAA,OAAO,IAAI,CAAC;AACZ,UAAA,UAAU,IAAI,GAAK;AACnB,UAAA,QAAQ,IAAI,EAAE;AACd,UAAA,iBAAiB,IAAS,EAAE;AAC5B,UAAA,SAAS,IAAS,CAAC;AACzB,UAAM,WAAW;AACX,UAAA,SAAS,IAAS,EAAE;AACpB,UAAA,aAAa,IAAS,EAAE;AACxB,UAAA,SAAS,IAAS,EAAE;AAEpB,UAAA,EAAE,WAAgB;AACxB,UAAM,SAAS;AAEf,UAAM,gBAAgB,YAAY;AAChC,YAAM,OAAO,MAAM,MAAM,KAAK,0BAA0B;AAClDA,YAAAA,YAAW,KAAK,KAAK,KAAK,OAAO,CAAC,MAAW,CAAC,EAAE,WAAW;AACjE,eAAS,QAAQA;AACV,aAAA,QAAQ,KAAK,KAAK;AAAA,IAAA;AAE3B,UAAM,QAAQ,YAAY;AACxB,WAAK,QAAQ;AACb,YAAM,MACH;AAAA,QACC,qBAAqB,KAAK,KAAK,YAAY,QAAQ,KAAK,UAAU,MAAM,KAAK,eAAe,eAAe,KAAK,WAAW,OAAO,KAAK;AAAA,MAAA,EAExI,KAAK,CAAC,QAAQ;AACT,YAAA,IAAI,WAAW,KAAK;AACjB,eAAA,QAAQ,IAAI,KAAK;AACf,iBAAA,QAAQ,IAAI,KAAK;AAAA,QAC1B;AAAA,MAAA,CACD,EACA,MAAM,CAAC,MAAW;AACjB,YAAI,GAAG;AACL,mBAAS,QAAQ;AAAA,QACnB;AAAA,MAAA,CACD;AAAA,IAAA;AAGL,UAAM,WAAW,MAAM;AACf,YAAA,WAAW,MAAM,MAAM;AAE7B,YAAM,SAAS;AACf,YAAM,SAAS;AACf,UAAI,aAAa,QAAQ;AACvB,eAAO,QAAQ;AACf,uBAAe,QAAQ;AAAA,MAAA,WACd,aAAa,QAAQ;AAG9B,uBAAe,QAAQ;AACvB,eAAO,QAAQ;AAAA,MAAA,OACV;AACL,eAAO,QAAQ;AACT,cAAA,SAAS,OAAO,MAAM,KAAK,CAAC,MAAW,EAAE,SAAS,QAAQ;AAC1D,cAAA,UAAU,OAAO,MAAM,KAAK,CAAC,MAAW,EAAE,YAAY,QAAQ;AACpE,YAAI,QAAQ;AACV,yBAAe,QAAQ,OAAO;AAC9B,iBAAO,QAAQ;AAAA,mBACN,SAAS;AAClB,yBAAe,QAAQ,QAAQ;AAC/B,iBAAO,QAAQ;AAAA,QAAA,OACV;AACL,yBAAe,QAAQ;AACvB,iBAAO,QAAQ;AAAA,QACjB;AAAA,MACF;AAAA,IAAA;AAEF,UAAM,UAAU,YAAY;AACpB,YAAA,MAAM,MAAM,MAAM,KAAK,kBAAkB,eAAe,KAAK,uBAAuB,OAAO,KAAK,EAAE;AAC7F,iBAAA,QAAQ,IAAI,KAAK,KAAK;AAC1B,aAAA,QAAQ,IAAI,KAAK,KAAK;AAAA,IAAA;AAG/B,KAAA,QAAA,SAAA,IAAAC,iBAAA,MAAM,cAAA,CAAc;AACX;AACT,KAAA,QAAA,SAAA,IAAAA,iBAAA,MAAM,MAAA,CAAM;AAGZ;AAAA,MAAM,MAAM,CAAC,MAAM,MAAM,OAAO,KAAK;AAAA,MAAG,CAAC,CAAC,QAAQ,MAAM,MAAM;AAC5D,eAAO,QAAQ;AACN;AACH;AACE;MACV;AAAA,MACE,EAAE,WAAW,MAAM,MAAM,KAAK;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;"}