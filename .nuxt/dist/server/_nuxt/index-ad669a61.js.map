{"version":3,"file":"index-ad669a61.js","sources":["../../../../pages/category/index.vue"],"sourcesContent":["<template>\r\n  <section>\r\n    <div class=\"container\">\r\n      <h1 class=\"page-title\">{{ route.query.is }}</h1>\r\n      <!-- <div class=\"tabs-container\">\r\n        <ul class=\"tabs\">\r\n          <li v-for=\"(i, index) in cateInfo\" :key=\"index\" @click=\"(categoryFilter = i._id), fetch()\">\r\n            {{ i.name }}\r\n          </li>\r\n        </ul>\r\n        <p><i class=\"fa-regular fa-angle-right\"></i></p>\r\n      </div> -->\r\n      <CategoryCardList :info=\"info\" />\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport CategoryCardList from \"../../components/category/card-list.vue\";\r\nconst axios = useNuxtApp().$axios;\r\nconst route = useRoute();\r\nconst cateInfo = ref<any>();\r\nconst isCate = ref<any>();\r\nconst info = ref<any>();\r\nconst page = ref(1);\r\nconst perPage = ref(10);\r\nconst tagId = ref(\"\");\r\nconst categoryFilter = ref<any>(\"\");\r\nconst totals = ref<any>(0);\r\nconst msgError = ref<any>();\r\nconst search = ref<any>(\"\")\r\nconst fetchCategory = async () => {\r\n  const data = await axios.post(`get-reuses-list/Category`);\r\n  const isFilter = data.data.info.filter((f: any) => !f.groupStatus);\r\n  cateInfo.value = isFilter;\r\n  isCate.value = data.data.info;\r\n}\r\nconst fetch = async () => {\r\n  await axios.post(\r\n    `get-articles?page=${page.value}&perPage=${perPage.value}&tagId=${tagId.value}&categoryId=${categoryFilter.value}&search=${search.value}`\r\n  ).then((res) => {\r\n    if (res.status === 200) {\r\n      info.value = res.data.info;\r\n      totals.value = res.data.total;\r\n    }\r\n  }).catch((e: any) => {\r\n    if (e) {\r\n      msgError.value = \"Data empty\";\r\n    }\r\n  })\r\n}\r\n\r\nconst isFilter = () => {\r\n  const cateName = route.query.is;\r\n  const update = \"Update\"\r\n  if (cateName === update) {\r\n    search.value = update\r\n    categoryFilter.value = \"\"\r\n  } else {\r\n    search.value = \"\"\r\n    const data = isCate.value.find((i: any) => i.name === cateName);\r\n    if (data) {\r\n      categoryFilter.value = data._id;\r\n      search.value = \"\"\r\n    } else {\r\n      categoryFilter.value = \"\"\r\n      search.value = \"\"\r\n    }\r\n  }\r\n}\r\nawait fetchCategory()\r\n\r\nwatch(\r\n  route,\r\n  (value) => {\r\n    if (value.query.is) {\r\n      isFilter();\r\n      fetch();\r\n    }\r\n  },\r\n  { immediate: true, deep: true }\r\n);\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.tabs-container {\r\n  display: flex;\r\n  align-items: center;\r\n  position: relative;\r\n\r\n  .tabs {\r\n    flex-grow: 1;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    overflow-x: auto;\r\n    overflow-y: hidden;\r\n    position: relative;\r\n\r\n    @include mobile {\r\n      justify-content: flex-start;\r\n    }\r\n\r\n    li {\r\n      padding: 5px 10px;\r\n      cursor: pointer;\r\n      display: flex;\r\n      align-items: flex-end;\r\n      white-space: pre !important;\r\n\r\n      &.current {\r\n        color: var(--sub-color);\r\n      }\r\n\r\n      i {\r\n        line-height: 1;\r\n        margin-left: 5px;\r\n      }\r\n    }\r\n  }\r\n\r\n  p {\r\n    display: none;\r\n    position: absolute;\r\n    right: 0;\r\n    width: 50px;\r\n    align-items: center;\r\n    justify-content: flex-end;\r\n    background: linear-gradient(270deg,\r\n        rgba(255, 255, 255, 1) 0%,\r\n        rgba(255, 255, 255, 0) 100%);\r\n\r\n    @include mobile {\r\n      display: flex;\r\n    }\r\n\r\n    @include tablet {\r\n      display: flex;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"names":["isFilter","_withAsyncContext"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAmBM,UAAA,QAAQ,WAAa,EAAA;AAC3B,UAAM,QAAQ;AACd,UAAM,WAAW;AACjB,UAAM,SAAS;AACf,UAAM,OAAO;AACP,UAAA,OAAO,IAAI,CAAC;AACZ,UAAA,UAAU,IAAI,EAAE;AAChB,UAAA,QAAQ,IAAI,EAAE;AACd,UAAA,iBAAiB,IAAS,EAAE;AAC5B,UAAA,SAAS,IAAS,CAAC;AACzB,UAAM,WAAW;AACX,UAAA,SAAS,IAAS,EAAE;AAC1B,UAAM,gBAAgB,YAAY;AAChC,YAAM,OAAO,MAAM,MAAM,KAAK,0BAA0B;AAClDA,YAAAA,YAAW,KAAK,KAAK,KAAK,OAAO,CAAC,MAAW,CAAC,EAAE,WAAW;AACjE,eAAS,QAAQA;AACV,aAAA,QAAQ,KAAK,KAAK;AAAA,IAAA;AAE3B,UAAM,QAAQ,YAAY;AACxB,YAAM,MAAM;AAAA,QACV,qBAAqB,KAAK,iBAAiB,QAAQ,eAAe,MAAM,oBAAoB,eAAe,gBAAgB,OAAO;AAAA,MAAA,EAClI,KAAK,CAAC,QAAQ;AACV,YAAA,IAAI,WAAW,KAAK;AACjB,eAAA,QAAQ,IAAI,KAAK;AACf,iBAAA,QAAQ,IAAI,KAAK;AAAA,QAC1B;AAAA,MAAA,CACD,EAAE,MAAM,CAAC,MAAW;AACnB,YAAI,GAAG;AACL,mBAAS,QAAQ;AAAA,QACnB;AAAA,MAAA,CACD;AAAA,IAAA;AAGH,UAAM,WAAW,MAAM;AACf,YAAA,WAAW,MAAM,MAAM;AAC7B,YAAM,SAAS;AACf,UAAI,aAAa,QAAQ;AACvB,eAAO,QAAQ;AACf,uBAAe,QAAQ;AAAA,MAAA,OAClB;AACL,eAAO,QAAQ;AACT,cAAA,OAAO,OAAO,MAAM,KAAK,CAAC,MAAW,EAAE,SAAS,QAAQ;AAC9D,YAAI,MAAM;AACR,yBAAe,QAAQ,KAAK;AAC5B,iBAAO,QAAQ;AAAA,QAAA,OACV;AACL,yBAAe,QAAQ;AACvB,iBAAO,QAAQ;AAAA,QACjB;AAAA,MACF;AAAA,IAAA;AAEI,KAAA,QAAA,SAAA,IAAAC,iBAAA,MAAA,cAAA,CAAc;AAEpB;AAAA,MACE;AAAA,MACA,CAAC,UAAU;AACL,YAAA,MAAM,MAAM,IAAI;AACT;AACH;QACR;AAAA,MACF;AAAA,MACA,EAAE,WAAW,MAAM,MAAM,KAAK;AAAA,IAAA;;;;;;;;;;;;;;;;"}